# frontend-react

This project contains the source for building a frontend to the
WriteRite service.

## State stores

* Transient state is managed in the respective components.
* Per-session state is managed in Redux.
* State persisting across sessions should be managed in Apollo Cache

## Setting up development

1. `git clone` this repository
2. Ensure that the envvars defined in `.env` are set, or overwritten. Note the following:
   * `GRAPHQL_HTTP` is the HTTP GraphQL endpoint of the backend.
   * `GRAPHQL_WS` is the WebSocket GraphQL endpoint of the backend.
3. The following dev server options may also be set
   * `HTTPS_CERT_FILE` and `HTTPS_KEY_FILE` for paths to the respective files to use a specific certificate and key under https. The implementation (and hence file format) is given by the `webpack-dev-server`.
4. The project was generated by `create-react-app` with `react-scripts` replaced by `rescripts`. Hence refer to them for further customization.
5. `NODE_ENV="development" npm run start` to launch the development server.

## Setting up production

The app is hosted by GitHub Pages. Check `writerite/.gitlab-ci` for deployment details.

## Stack summary

* Language: Typescript
* Framework: React
* Communication:
  * API: usual CRUD via GraphQL Queries and Mutations over HTTP via Apollo Client. Some use GraphQL Subscriptions
* Authentication:
  * Third-party (Google or Facebook) identity verification: frontend obtains an access token issued by third-party verifying that user isn't spam.
  * Authorization managed using JWTs issued by server.
* Form management: Formik, with verification using yup. Rich text editing by DraftJS
* CSS Framework: Styled Components
* Other API: Gravatar
* State management:
  * Session-global: Redux
  * Persistent: Apollo Cache
* Deployment and build tooling: create-react-app with rescripts, published on GitHub Pages

## Other notes

`client-models` folder is copied rather than symlinked due to limitations in code generation
